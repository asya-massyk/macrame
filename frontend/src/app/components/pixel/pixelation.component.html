<div class="pixelation-container">
  <!-- –î–µ–∫–æ—Ä–∞—Ç–∏–≤–Ω—ñ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è -->
  <div class="pixelation-decor-left"></div>
  <div class="pixelation-decor-right"></div>

  <!-- –ü–æ—á–∞—Ç–∫–æ–≤–∏–π –µ–∫—Ä–∞–Ω -->
  <div *ngIf="!imageSrc" class="pixelation-welcome">
    <h1 class="pixelation-title">–°—Ç–≤–æ—Ä—ñ—Ç—å –≤–ª–∞—Å–Ω—É —Å—Ö–µ–º—É!</h1>
    <p class="pixelation-subtitle">–ó–∞–≤–∞–Ω—Ç–∞–∂—Ç–µ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è, —â–æ–± –ø–µ—Ä–µ—Ç–≤–æ—Ä–∏—Ç–∏ –π–æ–≥–æ –Ω–∞ –ø—ñ–∫—Å–µ–ª—å–Ω—É –∫–∞—Ä—Ç–∏–Ω—É</p>
    <label for="file-upload" class="pixelation-upload-button">
      <span class="pixelation-upload-icon">üì∑</span>
      –í–∏–±–µ—Ä—ñ—Ç—å –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è
    </label>
    <input
      id="file-upload"
      type="file"
      accept="image/*"
      (change)="onImageUpload($event)"
      class="pixelation-input-hidden"
    />
  </div>

  <!-- –í—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è canvas -->
  <canvas
    *ngIf="imageSrc"
    #pixelationCanvas
    class="pixelation-canvas"
    (mousedown)="startCrop($event)"
    (mousemove)="updateCrop($event)"
    (mouseup)="endCrop()"
  ></canvas>

  <!-- –ü–æ–≤–∑—É–Ω–æ–∫ –¥–ª—è –ø—ñ–∫—Å–µ–ª—ñ–∑–∞—Ü—ñ—ó -->
  <div *ngIf="imageSrc && !isCropping" class="pixelation-slider-container">
    <input
      type="range"
      [min]="minPixelCount"
      [max]="maxPixelCount"
      step="1"
      [(ngModel)]="pixelCount"
      (ngModelChange)="updatePixelation()"
      class="pixelation-slider"
    />
  </div>

  <!-- –í–∏–±—ñ—Ä —Ñ–æ—Ä–º–∞—Ç—É —Ç–∞ –Ω–∞–∑–≤–∏ —Ñ–∞–π–ª—É -->
  <div *ngIf="imageSrc" class="pixelation-download-options">
    <label class="pixelation-download-label">–ù–∞–∑–≤–∞ —Ñ–∞–π–ª—É:</label>
    <input
      type="text"
      [(ngModel)]="fileName"
      placeholder="pixelated_image"
      class="pixelation-input pixelation-input--filename"
    />

    <label class="pixelation-download-label">–§–æ—Ä–º–∞—Ç:</label>
    <select
      [(ngModel)]="downloadFormat"
      class="pixelation-input pixelation-input--format"
    >
      <option value="image/png">PNG</option>
      <option value="image/jpeg">JPEG</option>
    </select>
  </div>

  <!-- –ö–Ω–æ–ø–∫–∏ -->
  <div *ngIf="imageSrc" class="pixelation-buttons">
    <button
      *ngIf="history.length > 0"
      (click)="undo()"
      class="pixelation-button pixelation-button--undo"
    >
      –°–∫–∞—Å—É–≤–∞—Ç–∏
    </button>
    <button
      *ngIf="!isCropping"
      (click)="startCropping()"
      class="pixelation-button pixelation-button--crop"
    >
      –û–±—Ä—ñ–∑–∞—Ç–∏
    </button>
    <button
      (click)="rotateImage()"
      class="pixelation-button pixelation-button--rotate"
    >
      –ü–æ–≤–µ—Ä–Ω—É—Ç–∏
    </button>
    <button
      (click)="downloadImage()"
      class="pixelation-button pixelation-button--download"
    >
      –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏
    </button>
  </div>
</div>